<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Адаптивный слайдер (многоразовый)</title>
  <style>
    :root {
      --max-width: 900px;
      --slider-height: 56vw;
      --thumb-size: 60px;
      box-sizing: border-box;
    }
    * { box-sizing: inherit; }
    body { font-family: Inter, system-ui, Arial; padding: 20px; background: #f6f7fb; color: #111; }

    .wrap { max-width: var(--max-width); width: 100%; margin: 0 auto 60px; }

    .slider {
      position: relative;
      width: 100%;
      height: var(--slider-height);
      max-height: 500px;
      background: #ddd;
      overflow: hidden;
      border-radius: 12px;
      box-shadow: 0 6px 20px rgba(20,30,60,0.08);
    }

    .slides {
      display: flex;
      height: 100%;
      transition: transform 0.45s cubic-bezier(.2,.9,.2,1);
      will-change: transform;
    }

    .slide {
      min-width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .slide img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
      display: block;
      user-select: none;
    }

    .control {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 44px; height: 44px;
      border-radius: 8px;
      background: rgba(255,255,255,0.85);
      display: flex; align-items: center; justify-content: center;
      box-shadow: 0 4px 12px rgba(20,30,60,0.08);
      cursor: pointer; border: 0;
    }
    .control.left { left: 10px; }
    .control.right { right: 10px; }

    .thumbs {
      margin-top: 12px;
      display: flex;
      gap: 8px;
      overflow-x: auto;
      padding-bottom: 6px;
    }

    .thumb {
      width: var(--thumb-size);
      height: var(--thumb-size);
      flex: 0 0 auto;
      border-radius: 6px;
      overflow: hidden;
      cursor: pointer;
      border: 2px solid transparent;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #eee;
    }

    .thumb img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .thumb.active {
      border-color: #2b6bf6;
      box-shadow: 0 6px 18px rgba(43,107,246,0.14);
    }

    .dots {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      bottom: 12px;
      display: flex;
      gap: 8px;
    }

    .dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: rgba(255,255,255,0.6);
    }

    .dot.active {
      background: #2b6bf6;
    }

    @media (max-width:520px){
      :root { --thumb-size: 48px; }
      .slider { border-radius: 8px; }
      .control { width: 38px; height: 38px; }
      .wrap { padding: 0 8px; }
    }
  </style>
</head>
<body>
  <div class="wrap slider-block">
    <h3>Слайдер №1</h3>
    <div class="slider">
      <div class="slides">
        <div class="slide"><img src="https://picsum.photos/1200/700?random=1" alt=""></div>
        <div class="slide"><img src="https://picsum.photos/900/1200?random=2" alt=""></div>
        <div class="slide"><img src="https://picsum.photos/1600/900?random=3" alt=""></div>
      </div>
      <button class="control left">◀</button>
      <button class="control right">▶</button>
      <div class="dots"></div>
    </div>
    <div class="thumbs"></div>
  </div>

  <div class="wrap slider-block">
    <h3>Слайдер №2</h3>
    <div class="slider">
      <div class="slides">
        <div class="slide"><img src="https://picsum.photos/800/600?random=11" alt=""></div>
        <div class="slide"><img src="https://picsum.photos/1000/1400?random=12" alt=""></div>
        <div class="slide"><img src="https://picsum.photos/1300/800?random=13" alt=""></div>
      </div>
      <button class="control left">◀</button>
      <button class="control right">▶</button>
      <div class="dots"></div>
    </div>
    <div class="thumbs"></div>
  </div>

  <script>
    document.querySelectorAll('.slider-block').forEach(initSlider);

    function initSlider(block) {
      const slidesEl = block.querySelector('.slides');
      const thumbContainer = block.querySelector('.thumbs');
      const dotsEl = block.querySelector('.dots');
      const slides = Array.from(slidesEl.querySelectorAll('.slide'));
      const total = slides.length;
      let idx = 0;

      slides.forEach((s, i) => {
        const img = s.querySelector('img');
        const thumb = document.createElement('button');
        thumb.className = 'thumb';
        thumb.innerHTML = `<img src="${img.src}" loading="lazy">`;
        thumb.addEventListener('click', () => goTo(i));
        thumbContainer.appendChild(thumb);

        const dot = document.createElement('div');
        dot.className = 'dot';
        dotsEl.appendChild(dot);
      });

      const thumbs = Array.from(thumbContainer.children);
      const dots = Array.from(dotsEl.children);

      function update() {
        slidesEl.style.transform = `translateX(${-idx * 100}%)`;
        thumbs.forEach((t, i) => t.classList.toggle('active', i === idx));
        dots.forEach((d, i) => d.classList.toggle('active', i === idx));
      }

      function goTo(i) {
        idx = (i + total) % total;
        update();
      }

      block.querySelector('.control.left').addEventListener('click', () => goTo(idx - 1));
      block.querySelector('.control.right').addEventListener('click', () => goTo(idx + 1));

      // свайп
      let startX = null, deltaX = 0;
      const sliderEl = block.querySelector('.slider');
      sliderEl.addEventListener('touchstart', e => { startX = e.touches[0].clientX; }, {passive:true});
      sliderEl.addEventListener('touchmove', e => { if(startX !== null) deltaX = e.touches[0].clientX - startX; }, {passive:true});
      sliderEl.addEventListener('touchend', () => {
        if(Math.abs(deltaX) > 40) { if(deltaX < 0) goTo(idx + 1); else goTo(idx - 1); }
        startX = null; deltaX = 0;
      });

      update();
    }
  </script>
</body>
</html>
